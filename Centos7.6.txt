#### 命令

##### shutdown

shutdown [选项]

> -r：重启计算机。
>
> -h：关机。
>
> -h时间：定时关机。
>
> ``` shell
> shutdown -h +10		# 10分钟后关机
> shutdown -h 23:30	# 指定具体时间关机
> ```

##### 运行级别

###### init

init 0~6	7个运行级别

Linux的7个运行级别介绍如下。

第0级别：系统停机模式，系统默认运行级别不能设置为0，否则不能正常启动，计算机处于关机状态。

第1级别：单用户模式，root权限，用于系统维护，禁止远程登录，就像Windows下的安全模式登录。

第2级别：多用户模式，没有NFS和网络支持。

第3级别：完整的多用户文本模式，有NFS和网络支持，登录后进入控制台命令行模式。

第4级别：系统未使用模式，一般不用，在一些特殊情况下才会使用这个级别，例如，在笔记本的电池用尽时，可以切换到这个模式来做一些设置。

第5级别：图形化模式，登录后进入图形GUI模式，X-Window系统。

第6级别：重启模式，默认运行级别不能设为6，否则不能正常启动。

运行init6计算机就会重启。命令使用格式：init 0～6。作用：用于切换系统运行级别。

###### runlevel

查看当前运行级别

###### systemctl set-default

查看当前默认的运行级别

> 第3运行级别使用multi-user.target替代。	`systemctl set-default multi-user.target`
>
> 第5运行级别使用graphical.target替代。	  `systemctl set-default graphical.target`

##### stat

查看文件属性(包括文件的时间属性)		`stat /etc/passwd`

##### 文件的管理

###### touch

命令使用格式：touch 文件名

```shell
touch -c 文件名	# 只修改文件时间戳，即使目标文件不存在，也不创建新文件
touch -a 文件名	# 只修改文件的访问时间为当前时间
touch -m 文件名	# 只修改文件的修改时间为当前时间
touch -m -t 202005141353.45 文件名	# 指定修改文件的修改时间格式为年月日时分.秒，秒可以不加，默认为0秒
```

> touch命令实际上并不是用于创建文件，而是用于修改时间戳的，只是目标文件不存在时，会自动创建一个空文件，如果目标文件已存在，那么只修改目标文件时间戳。

```shell
touch file{6..20}	# 使用命令展开式创建file6到file20
```

> 访问时间：atime，即查看内容的时间，如# cat a.txt，查看一下文件，即可更新文件的访问时间，该时间记录的是文件最后被访问的时间。
>
> 修改时间：mtime，即修改了文件内容的时间，如# vim a.txt，修改文件内容，即可更新文件修改时间，该时间记录的是文件最后被修改的时间，mtime一旦变化，ctime也会随之变化。
>
> 改变时间：ctime，即文件属性发生改变的时间，如权限、文件容量大小等一些并非文件内容的数据，而是与文件有关的元数据发生改变的时间。
>
> 注意：如果mtime发生改变，那么ctime也会随之而变，因为文件的元数据包含了文件的容量大小。mtime是根据文件内容发生改变而改变的，内容改变则说明容量改变，所以ctime也会改变。即使只是atime改变，ctime也会随之改变。

###### vim

使用重定向新建文件：`echo aaa > test.txt`

###### mkdir

命令使用格式：mkdir[选项]目录名。

作用：创建目录。

###### rm

命令使用格式：rm [选项] 文件/目录。

作用：可以删除一个目录中的一个或多个文件或目录。对于链接文件来说，只删除整个链接文件，原文件是保持不变的。

-f：强制删除，没有提示。

-r：删除目录。

###### mv

命令使用格式：mv[选项]源文件/目录 目标文件/目录。

作用：用于移动文件或目录和更改文件或目录名。



##### 文件查看

###### cat

命令使用格式：cat文件名。文件可同时指定多个。

作用：查看文件内容，连接并显示，如果指定多个目标，则按指定的顺序显示。

###### more

向后翻一屏：Space（空格键）。

向前翻一屏：B键，如果已翻到最后一屏，则不能向前翻，此时会自动退出。

向后翻一行：Enter（回车键）。

退出查看：Q键。

###### less

向后翻一屏：Space （空格键）或PageUp按键。

向前翻一屏：B键或PageDown按键。

向后翻一行：Enter（回车键）。

向前翻一行：K键。

搜索/查找操作关键字有2种方法（默认不区分字母大小写）。

/关键字：从当前位置向后查找关键字。

？关键字：从当前位置向前查找关键字。

按N键：跳到下一个关键字。

按B键：跳到上一个关键字。

按Q键：退出。

> Linux系统中more命令与less命令的区别如下。
>
> more：不支持后退，但几乎不需要加参数，空格键是向后翻屏。Enter键是向后翻一行，在不需要后退的情况下比较方便。less：支持前后翻屏，既可以向前翻屏，也可以向后翻屏。空格键是向前翻屏，Enter键是向后翻一行。

###### head

选项：-n表示查看从文件头开始指定行数的内容，如-n 3，表示查看文件中的头3行内容。选项支持-n3的写法，即选项与选项参数之间不加空格的写法，还可以直接用-3的写法查看文件的头3行。

###### tail

-n：显示文件尾部指定行数的内容（n为数字）。

-f：动态查看。在查看某个文件时默认查看末尾10行，显示后并不退出查看，会等待显示后续追加至此文件的新增内容，并立即显示出来，一般用于查看日志文件。





#### 用户管理

##### 创建用户

命令使用格式如下：useradd [选项] 用户名。

常用选项如下。

-d：指定新创建用户的家目录路径。

-M：不创建用户的家目录。

-g：指定用户初始组的名字或GID，前提是该组必须是存在的，如果没有设置该选项，useradd会根据/etc/login.defs文件中的USERGROUPS_ENAB环境变量进行设置。USERGROUPS_ENAB默认为yes，会用和用户名相同的名字创建用户组，并且GID等于UID。

-G：指定用户要加入的附加组列表，使用逗号分隔多个组，不要添加空格，如果不设置，用户仅加入初始组（一个用户只允许有一个初始组，可以有多个附加组）。

-s：指定用户登录系统后默认使用的Shell，请确保指定的Shell已经安装，默认的是bash。有时需要禁止某些用户执行登录动作，如用来执行系统服务的用户，将该用户登录系统后默认使用的Shell指定为/sbin/nologin就可以禁止该用户登录。

-u：指定用户UID。注意：用户初始组是指在创建用户的同时创建的与用户名同名的组，也称为主组。附加组则是指用户创建后或在创建的同时指定的一个额外的组，此组不属于用户初始组，因此称为附加组。

##### 删除用户

命令使用格式：userdel [选项] 用户名。

选项如下所示。

-r：删除时，会同时删除用户的家目录和/var/mail目录下该用户的相关目录。

##### 修改用户属性

usermod命令用于修改用户账号属性信息。

命令使用格式：usermod [选项] 用户名。

常用选项如下。

-u：修改用户的UID。

-d：修改用户的家目录。

​	-m：选项会自动创建新目录并且将内容移动到新目录中

-g：修改用户初始组，只能有一个。

-G：修改用户附加组，可以有多个。

-c：修改用户描述（说明）信息。

-s：修改用户登录Shell。

-L：锁定用户，锁定用户后，该用户不得登录系统。

##### 用户密码管理

###### passwd

普通用户只能使用passwd命令更改用户自身的密码。对于管理员用户的密码管理权限，可以使用passwd USERNAME更改所有其他用户的密码。

命令使用格式：passwd [选项] [选项参数] [用户名]。

###### chage

chage命令用于修改用户密码属性。

命令使用格式：chage [选项] [选项参数] 用户名。

常用选项如下。

-m：密码可更改的最小天数，参数为0时，表示任何时候都可以更改密码。

-M：密码保持有效的最大天数。

-W：用户密码到期前，提前收到警告信息的天数。

-E：账号到期的日期，过了这一天，此账号将不可用。

-d：上一次更改的日期，参数为0时，表示强制用户在下次登录时更改密码。

##### 查看用户相关命令

###### id

作用：查看用户和组的信息。

命令使用格式：id [选项] [用户名]。

选项有以下几种。

-n：和-u/-g/-G组合使用，在查看信息时以名称显示输出；如不加-n选项，则以ID号显示输出。

-u：只显示指定用户的UID。

-g：只显示指定用户的GID。

-G：只显示指定用户的所有组的GID列表。

###### whoami

作用：查看当前登录系统的用户名。

命令使用格式：whoami [选项]。

###### who

作用：显示当前登录系统的用户信息。

命令使用格式：who [选项]。

###### w

作用：显示已经登录系统的用户列表。

命令使用格式：w [用户名]。

###### users

作用：显示当前登录系统的所有用户的用户列表。

命令使用格式：users [选项]。

